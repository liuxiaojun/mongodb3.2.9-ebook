# 20.1 分布式部署之ReplicaSet集群

## ReplicaSet （副本集）
普通的master-slave 是没有选举关系，slave和slave之间并没有通信。
ReplicaSet方式，slave和slave之间存在通信。

## primary , secondary, arviter


## 搭建
### 给集群起名字 
分别在3个mongo （27000，27001， 27002）的配置文件mongodb.conf 中增加配置项 replSet=16wifi，然后启动

## 集群的config配置
* 初始化集群: 进入一台机器(27001) rs.initiate()
* 查看集群的配置: rs.conf() 发现只有一台机器
* 向集群中添加成员: rs.add("192.168.0.1:27001"); rs.add("192.168.0.1:27002")
* 再次查看集群的配置，状态。rs.conf(); rs.status()
* 添加仲裁 rs.addArb("192.168.161.138:27003")

## 测试
* 关掉 27000， 查看其它两个 27001， 27002， 查看谁被选举为主， db.status()
* 27003 为 arviter

## 使用 TODO
给集群的名字 16wifi， 


## links
  * [目录](<preface.md>)
  * 上一节: [19.2 备份和恢复](<19.2.md>)
  * 下一节: [20.2 分布式部署之mongodb Sharding分片终极之海量数据部署](<20.2.md>)