# 10.1 update运算符分析一($inc,$mul,$rename,$setOnInsert)

## update 常见的操作

对Field的操作$inc $mul $rename $setOnInsert $set $unset $min $max $currentDate
对Array的操作 
Modifiers 专门的修改器
Bitwise 位运算
Isolation 事务

## Field
update 原子性的运算符，

### $inc
```
db.products.update(
   { sku: "abc123" },
   { $inc: { quantity: -2, "metrics.orders": 1 } }
)
```
递增不存在的字段，会新建这个字段，值为增加的值

### $mul 做乘法
```
db.products.update(
   { _id: 1 },
   { $mul: { price: 1.25 } }
)
```
price 乘以 75
不存在的字段乘以数值的话，新增不存在的字段，值为0

### $rename
```
db.students.update( { _id: 1 }, { $rename: { 'nickname': 'alias', 'cell': 'mobile' } } )
```
更新后的字段必须不存在于原字段中


### $setOnInsert 在set的时候执行的是insert的操作
如果查询没有结果，那么用$setOnInsert 作为插入的document
```
db.user.update({"_id":2},{$setOnInsert:{$name:"jack"}},{upsert:true})
```


## links
  * [目录](<preface.md>)
  * 上一节: [09.1 评估运算符($mod,$regex,$text,$where,$all,$elemMatch,$size))](<09.1.md>)
  * 下一节: [10.2 update运算符分析二($set,$unset,$min,$max,$currentDate)](<10.2.md>)